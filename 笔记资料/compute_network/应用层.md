### DNS

域名系统DNS：将域名解析成IP地址。

> PS：mail.ttcv.com  ，每个域名由标号组成，每个标号由英文字母和数字组成，不区分大小写，每个标号不能超过63个字符。
>
> mail：三级域名
>
> ttcv：二级域名
>
> com：顶级域名

#### 根域名服务器

根域名服务器是最高层次的域名服务器，也是最重要的域名服务器。根域名服务器知道所有顶级域名服务器的IP地址和域名。只要是本地服务器无法自己解析，都会首先去求助根域名服务器。

根域名服务器采用的是任播的技术（任播的终点是一组在不同地点的计算机，但具有相同的IP地址，数据报只交付其中一个，通常是距离最近的一个），因此当DNS向根域名服务器的IP地址发出查询报文时，可以在最短的时间知道离它最近的一个根域名服务器的地址，加快了查询速度。

#### 顶级域名服务器

这些域名服务器负责管理注册在该顶级域名服务器的所有二级域名。当收到DNS查询请求时，就给出响应的IP地址或者下一步该查询的域名服务器

#### 权限域名服务器

负责一个区的域名服务器，比如abc.com，可以分成多个区，例如x.abc.com和y.abc.com。DNS服务器的管辖范围是以区为单位的。

#### 本地域名服务器

一台主机发出DNS查询时，最先到达的就是本地域名服务器。一般windows时再IPV4的网络属性中配置的首选和备用DNS指的就是本地域名服务器的地址。

##### 递归查询

如果主机询问的本地域名服务器不知道被查询的IP地址，那么本地域名服务器就以DNS客户端的身份去继续向其他根域名服务器发起查询，而不是让该主机自己进行下一步的查询。

##### 迭代查询

当根服务器收到本地域名服务器的查询时，要么给出相应的IP地址，要么告诉本地服务器下一个应该查询的域名服务器。然后由本地域名服务器自己去进行后续的查询。

### 文件传输协议

#### FTP（TCP）

FTP：是互联网上运用最广泛的文件传输协议。

工作原理：一个主进程，用于接收新的请求，另外若干个从属进程，负责处理单个请求。

1. 打开熟知的21端口，供客户端进行连接。
2. 等待客户端连接。
3. 启动从属进程处理客户进程发来的请求。从属进程在对客户进程的请求处理完毕后即停止，但从属进程在运行时期还可能根据需要创建其他子进程。
4. 回到等待状态，接受其他客户进程发来的请求。主进程和从属进程是并发进行的。



如下图，FTP协议传输文件时会建立两个连接，一个控制连接，还有一个数据连接。当客户进程向服务器发起创建连接的请求之后，**除了和21端口建立一个控制连接外，还会向20端口建立一个数据连接**。两个连接使用了不同的端口号，所以控制连接和数据连接不能发生混乱。

![ftp](http://images.hcyhj.cn/network/ftp.png)

**劣势**：对文件的追加这种情况是不友好的，需要将完整的文件传输回来，追加之后再传输回去，消耗的网络流量太大。这种情况下**NFS**的支持就相对友好，它允许远程的打开文件，并且能在特定的位置进行读写数据，所以在网络上只会传输少量的数据。

#### TFTP（UDP）

只支持文件传输，不支持交互。

**优点**：

1. 适用于UDP的环境，在多个机器下载时使用最佳。
2. 所占内存较小，这对较小的计算机或者某些特殊用途 设备是很重要的。

**特点**

1. 每次传输数据都是512字节，最后一次可以不足512字节。
2. 数据报文按序编号，从1开始。
3. 支持ASCII和二进制传输。
4. 可对文件读或者写。
5. 使用简单的首部。





### TELNET

TELNET是一个简单的**远程终端协议**。使用客户服务器的模式，远程主机开启一个TELNET服务进程，本地系统运行TLENET客户进程。和FTP类似，服务器中的主进程等待新的请求，并产生一个从属进程来处理每个连接。数据在网络中传输时会转换成**NVT（Network Virtual Terminal 网络虚拟终端）格式**，回到客户端时又会从NVT格式转换成适合本地系统所需的格式。



### 万维网

万维网是一个分布式的**超媒体系统**，是**超文本系统**的扩充，超文本是万维网的基础。它以客户服务器的方式运行，浏览器就是客户端，文档驻留的地方就是服务端。

为了满足在浏览器上能够方便的浏览各种页面，作出了下面三种规定：

- 统一资源定位符URL（Uniform Resource Locator）：每个文档在整个互联网中都有一个唯一的标识符URL。

- 超文本传输协议HTTP（HyperText Transfer Protocol）：传输时使用一个统一的协议。

- 超文本标记语言HTML（HyperText Markup Language）：渲染页面时使用统一的语言。

#### URL

URL由四个部分进行组成：<协议>://<主机>:<端口>/<路径>

URL里面的字母不区分大小写，用户不仅能通过URL访问万维网的页面，还可以用其访问其他的互联网的应用程序，例如FTP等，只需要使用浏览器即可。

#### HTTP

HTTP协议是**无状态的**。

![http](http://images.hcyhj.cn/network/http.png)



**HTTP/1.0**默认是短连接的，其主要缺点就是每次请求一个文档就需要耗费两倍RTT的开销。另一种开销是每次客户端和服务端建立TCP连接，服务端都需要进行缓存和变量的分配，客户量很大的情况下，会加大服务端的负载。



**HTTP/1.1**默认是长连接的，所谓的长连接是万维网服务器在发送响应后仍会保持这条连接，后续可以使用这条连接来传输HTTP报文和响应报文，并不局限于同一个文档，只要只写文档在同一个服务器就行。

- 非流水线：客户端收到前一个响应之后才能发出下一个请求。服务器在发回一个响应之后，TCP就处于空闲状态，浪费了服务端资源。
- 流水线：客户在收到响应之前可以接着发新的请求。访问所有的对象都只用花一个RTT时间，大大提升了服务端的效率。



##### 代理服务器

**代理服务器**是一种网络实体，又称为**万维网高速缓存**。它可以在客户端或者服务端工作，也可以在中间系统上工作。可以减小源站点服务器的压力。



##### HTTP报文结构

- 请求报文

  方法：OPTION/GET/POST/PUT/DELETE/HEAD/TRACE/CONNECT

- 响应报文

  状态码：

  - 1xx表示通知信息
  - 2xx表示成功
  - 3xx表示重定向
  - 4xx表示客户的差错
  - 5xx表示服务器内部错误

  

![http_message](http://images.hcyhj.cn/network/http_message.png)

都是由三个部分组成的，两者的格式就是**开始行**的区别不同

1. **开始行**，用于区分是请求报文还是响应报文。请求报文中叫**请求行**，响应报文中叫**状态行**。在开始行的三个字段之间都用空格隔开，最后用换行。
2. **首部行**，用来说明浏览器、服务器或者报文主体的一些信息。
3. **实体主体**，请求报文中一般不用这个字段，响应报文中有可能也没这个字段。



### 电子邮件

### DHCP

### SNMP

### 跨进程通讯

### P2P