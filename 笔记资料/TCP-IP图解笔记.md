### OSI模型
![](http://images.hcyhj.cn/blogimages/osi.png)

### TCP与UDP的区别
>TCP：TCP是一种面向有连接的传输层协议，它可以保证两端通信主机之间的通信可达。TCP能够正确的处理在传输过程中丢失、传输顺序乱掉等异常问题。此外，TCP还能够有效的利用带宽、缓解网络拥堵。但是为了建立和断开连接，需要进行至少7次确认处理，导致了很多流量的浪费。因此不利于视频会议等场合的使用。

>UDP：UDP是一种面向于无连接的传输层协议。UDP不会关注接收端是否接收到了数据，如果需要保证接收端接收数据，则需要在应用程序中进行实现。所以UDP很适合多播、广播通信以及视频通信等多媒体领域。

### 中间设备

1. 物理层使用的中间设备叫做**转发器**。
2. 数据链路层使用的中间设备叫做**网桥或者桥接器**。
3. 网络层使用的中间设备叫做**路由器**。
4. 在网络层以上使用的中间设备叫做**网关**。



### IP

#### ARP协议

地址解析协议，从分组数据包的IP地址中解析出物理地址（MAC地址）的一种协议。只能解决**同一个局域网**上的主机或者路由器的IP地址和硬件地址的问题。

#### ICMP协议
网际控制报文协议，它可以用来去诊断网络的健康状况。使用此协议时，IP数据包在发送途中一旦发生异常导致无法送达目标地址时，需要给发送端送达一个异常通知。

##### ICMP差错报文公有四种

- 终点不可达：路由器或者主机不能交付数据时就向源点发送终点不可达报文。
- 超时：当路由器收到TTL为0的数据时，丢弃数据，并向源点发送时间超过报文。
- 参数问题：当路由器或者主机收到的数据首部中有的字段值不正确时，丢弃数据，并向源点发送参数问题报文。
- 改变路由（重定向）：路由器把改变路由的报文发送给主机，让主机知道下一次应该将报文发送给另外的路由器（更好的路由）。

##### 常用的ICMP询问报文有两种

1. 回送请求和回答：这种询问报文用来测试目的站是否可达以及了解其有关状态。
2. 时间戳请求和回答：可用于时间同步和时间测量。其报文是用来请求某台主机或者路由器回答当前的日期和时间。在ICMP时间戳回答报文中有一个32位的字段，其中写入的整数代表从1900年1月1日起到当前时刻一共有多少秒。

##### 应用举例

1. PING指令，用来测试两台主机之间的连通性。
2. traceroute（windows中是tracert），用来跟踪一个分组从源点到终点的路径。

#### IGMP

> 网际组管理协议，可以用来去协调多播组的成员信息。

### CIDR

构造超网

#### 路由

RIP（Routing Information Protocol）：内部网关协议，**只适用于小型互联网**。

OSPF（Open Shortest Path First）：开放最短路径优先。互联网规模很大时，OSPF要比RIP好得多。它没有“坏消息传的慢“的问题。

BGP：外部网关协议。支持五分类域间路由选择CIDR。每个自治系统中都会有一个BGP发言人。



#### 路由器的构成

路由器是一种具有多个输入端口和多个输出端口的专用计算机，其任务是转发分组。

交换结构有三种：

- 存储器：利用中断技术通知选择处理机。
- 总线：所有的输入端共享一条总线。
- 互联网络：n个输入端口和n个输出端口共有2n条总线。

#### IPv6

单播：传统的点对点通讯。

多播：一点对多点的通讯，数据报发送到一组计算机的每一台。

任播：任播的终点是一组计算机，但数据报只交付其中一个，通常是距离最近的一个。

##### 地址分类

- 未指明地址：16个字节全为0，可以缩写为“**::**”。这个地址不能作为目的地址。
- 环回地址：IPv6的环回地址是0:0:0:0:0:0:0:1，可缩写为::1。它的作用和IPv4回环地址一样。
- 多播地址：FF00::/8
- 本地链路单播地址：FE08::/10
- 全球单播地址：

##### IPv4向IPv6过渡

1. 双协议栈：IPv4和IPv6都支持。
2. 隧道技术：将IPv6伪装成IPv4，必须把IPv4首部的协议字段值设置为41。

#### IP多播

多播：在互联网进行多播就叫做IP多播。IP多播多传送的分组需要使用多播IP地址。多播组中需要一个标识符，然后设法让加入这个多播组的主机的IP地址与多播组的标识符关联起来。**多播地址只能用于目的地址，而不能用于源地址**。

多播路由器：能够运行多播协议的路由器叫做**多播路由器**。

##### 硬件多播

在本局域网进行硬件多播

##### 互联网多播



#### VPN

##### 专用地址

- 10.0.0.0到10.255.255.255（或记为10.0.0.0/8，又称为24位块）
- 172.16.0.0到172.31.255.255（或记为172.16.0.0/12，又称为20位块）
- 192.168.0.0到192.168.255.255（或记为192.168.0.0/16，又称为16位块）

采用这类地址互联的网称为专用互联网或者本地互联网，简称专用网。

##### VPN构成

使用IP隧道技术实现虚拟专用网，每个专用网至少要有一个路由器具有合法的全球IP地址。

#### NAT

网络地址转换，访问互联网时，内网IP转换成公网IP。要想一个公网IP对应多个内网IP，就必须要使用**NAPT**技术，即**网络地址与端口号转换**。

### 网络接口层
>我们可以将网络接口层视为NIC（Network Information Center）起作用的"驱动程序"。驱动程序是在操作系统与硬件之间起桥梁作用的软件。计算机的附加设备或扩展卡，不能直接插到电脑上或电脑的扩展槽上就能马上使用的，还需要响应驱动程序的支持。

### 远程登入协议
>TCP/IP网络中远程登录常用TELNET和SSH两种协议。

### 文件传输协议（FTP）
>FTP（File Transfer Prototol）,可以远程传输文件，支持文本方式和二进制方式。在FTP中进行传输时会建立两个TCP连接，分别是发出传输请求时所要用到的控制连接与实际传输数据时所要用到的数据连接。这两种连接的控制管理属于会话层的功能。




### TCP/IP分层模型与通信
>在每个分层中，都会对所发送的数据附加一个首部，在这个首部中包含了该层的必要信息，如发送的目标地址以及协议相关信息。
#### 包、帧、数据报、段、消息
>包：可以说是全能性的术语。

>帧：用于表示数据链路层中包的单位。

>数据报：是IP和UDP等网络层以上的分层中包的单位。

>段：则表示TCP数据流中的信息。

>消息：是指应用协议中数据的单位。

#### 包首部就像协议的脸
>相互通信的两端计算机如果在识别协议的序号以及校验和的计算方法上不一样，就根本无法实现通信。


### SNS
>SNS(Social Network Service),中文名叫社交网络，是一种即时共享的服务。对于移动电话，智能手机等设备，在它们装入电池开机的那一刻，就已经由通信运营商设定了具体的IP地址。启动相应的应用程序，则会连接指定的服务器，经过一系列的校验之后，服务器上累积的信息便会在手机终端上显示出具体内容。

